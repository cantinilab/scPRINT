<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><link rel="canonical" href="https://www.jkobject.com/scPRINT/structure/" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>structure - scprint</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../assets/_mkdocstrings.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "structure";
        var mkdocs_page_input_path = "structure.md";
        var mkdocs_page_url = "/scPRINT/structure/";
      </script>
    
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> scprint
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Home</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="#">structure</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#gene-embedders">gene embedders</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#data_loaders">data_loaders</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#model">model</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#trainer-cli">trainer &amp; cli</a>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#tasks">tasks</a>
    </li>
    </ul>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../pretrain/">pre-training</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../usage/">usage example</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">example notebooks</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../notebooks/cancer_usecase/">Cancer usecase</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../notebooks/cancer_usecase_part2/">Cancer usecase (part 2)</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">documentation</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../model/">model</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../tasks/">tasks</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../cli/">cli</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../embedder/">embedders</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../utils/">utils</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">scprint</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" aria-label="Docs"></a></li>
      <li class="breadcrumb-item active">structure</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="structure">structure</h1>
<h2 id="gene-embedders">gene embedders</h2>
<p>Function to get embeddings from a set of genes, given their ensembl ids. For now use 2 different models:</p>
<ul>
<li><code>RNABert</code>: for non coding genes</li>
<li><code>ESM2</code>: for protein coding genes</li>
</ul>
<p>given ids, a fasta file, will use the models to compute an embedding of each gene.</p>
<p>This could be potentially applied to genes with mutations and from different species.</p>
<h2 id="data_loaders">data_loaders</h2>
<p>From scDataloader. (see more in the available readmes and website https://jkobject.com/scDataLoader)</p>
<p>For now can work with either one to many AnnData's or a laminDB Collection of AnnDatas</p>
<p>allows you to preprocess your anndatas too.</p>
<p>They can be stored locally or remotely</p>
<p>stores them in a <code>Dataset</code> class.
Creates the DataLoaders from a <code>Datamodule</code> Class.
Collates the results using a <code>Collator</code> function.</p>
<h2 id="model">model</h2>
<p>Extends from lightning data module to implement all the necessary functions to do:</p>
<ul>
<li>training</li>
<li>validation</li>
<li>testing</li>
<li>prediction (inference)</li>
</ul>
<p>is subdivided into multiple parts:</p>
<ul>
<li>encoder</li>
<li>transformer</li>
<li>decoder</li>
</ul>
<h2 id="trainer-cli">trainer &amp; cli</h2>
<p>the model uses lightning's training toolkit and CLI tools.</p>
<p>to use CLI, just call <code>scprint ...</code> (will call the <code>__main__.py</code> function).
Additional, training-specific informations are passed to the model using the trainer.py function.
specific training schemes are available under the <code>config</code> folder as <code>yaml</code> files.
Moreover the model can be trained on multiple compute types. SLURM scripts are available under the <code>slurm</code> folder.</p>
<h2 id="tasks">tasks</h2>
<p>Implement different tasks that a pretrained model would perform. for now:</p>
<ul>
<li>GRN prediction: given a single cell dataset and a group (cell type, cluster, ...) will output a <code>GRnnData</code> completed with a predicted GRN from the attention of the model.</li>
<li>denoising: from a single cell dataset, will modify the count matrices to predict what it would have looked like if it had been sequenced deeper, according to the model.</li>
<li>embedding: from a single cell dataset, will create embeddings (low dimensional representations) of each cells, as well as prediction of the cell labels the model has been trained on (cell type, disease, ethnicity, sex...). It will also output a umap and predicted expression from the zinb, post bottleneck (similar to a VAE decoder prediction)</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href=".." class="btn btn-neutral float-left" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../pretrain/" class="btn btn-neutral float-right" title="pre-training">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href=".." style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../pretrain/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "..";</script>
    <script src="../js/theme_extra.js"></script>
    <script src="../js/theme.js"></script>
      <script src="../search/main.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
